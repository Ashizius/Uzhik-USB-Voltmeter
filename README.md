# Серийный ужик
USB-вольтметр с записью и выводом на экран.

## Описание программы
Программа для вывода сигналов с аналоговых входов Ардуино на ПК в реальном времени с возможностью записи в файлы.
Поддерживается одновременная работа нескольких устройств.

### Возможности
- Есть выбор портов с которых необходимо производить считывание.
- Есть выбор каналов
- Каждому входу можно назначать свои множители.
- Можно назначить количество точек и интервал считывания.
- Можно назначить интервал перерисовки интерфейса и работы считывателя.

### Выход программы
- График напряжения от времени (перестраивается в реальном времени).
- Файлы `.csv` со столбцами`ВРЕМЯ-ВХОД1-ВХОД2-...`

### Требования
- Python3
  - pyserial
  - matplotlib
  - стандартные библиотеки Conda
- ОС: Windows 7 и новее или Linux (последнюю не тестировал, но тоже должна работать).

## Установка и запуск

Для запуска потребуется miniconda3

1. Скачать программу с GitHub
2. Записать на Ардуинку скетч из папки `sketch_device`
3. (опционально) импортировать окружение:
    - скрипт для Linux `.importEnv.sh`
    - скрипт для Windows `.importEnv.cmd`
4. Выполнить файл App.py

Конфиги создаются и хранятся в папке `config` в формате JSON

Файлы измерений сохраняются в папку `data`

## Архитектура программы

Устройство программы можно разбить на 4 крупные части:
  - Модель
  - Интерфейс
  - Презентер
  - Запись в файлы

В целом, каждая часть может работать независимо от другой, кроме презентера, который связывает их вместе

Интерфейсы работы с классами Plotter и SettingsReader схожи.

### Модель
Отвечает за считывание и обработку данных с ком-порта.

Состоит из следующих классов:
- Com - Отвечает за работу с портами
- ComData - работа с данными, получаемыми из ком-порта. 
  - Создаётся для каждого порта.
  - Парсит строку в словарь с данными по отдельным входам
- Model - основной класс, отвечает за взаимодействие программы с портами и получение данных с учётом множителя.

### Интерфейс

Интерфейс состоит из основного класса Interface и подклассов Window. Реализован на tkInter

Класс Plotter отвечает за построение и перестроение графиков в реальном времени. Для ускорения перерисовки используется `animate`

### Презентер
состоит из 
- основного класса Presenter, который связывает весь код программы
- класса AppConfiguration - отвечает за настройки программы, управляются Presenter.


### Запись в файлы
- класс SettingsReader - отвечает за считывание и запись настроек
- класс DataSaver - отвечает за запись в файлы